/*
                                                                 _ _    
 _ __   __ _  __ _  _____   ____ _ _ __ ___  _ __        ___  __| | | __
| '_ \ / _` |/ _` |/ _ \ \ / / _` | '_ ` _ \| '_ \      / __|/ _` | |/ /
| |_) | (_| | (_| |  __/\ V / (_| | | | | | | |_) |  _  \__ \ (_| |   < 
| .__/ \__,_|\__, |\___| \_/ \__,_|_| |_| |_| .__/  (_) |___/\__,_|_|\_\
|_|          |___/                          |_|                         
┌──────────────────┬────────────────────────────────┐
│ Name             │ Pagevamp SDK                   │
├──────────────────┼────────────────────────────────┤
│ version          │ 0.1.63                         │
├──────────────────┼────────────────────────────────┤
│ Last modified on │ 2014-07-01T19:27:05.607Z       │
├──────────────────┼────────────────────────────────┤
│ Last modified by │ Julien L <julien@pagevamp.com> │
└──────────────────┴────────────────────────────────┘
*/
!function(t){function e(){this.events=new Object,this.offers=new Object,this.retroactiveList={}}e.prototype.subscribe=function(t,e){null==this.events[t]&&(this.events[t]=new Array);var n=Math.round(1e5*Math.random())+"-"+Math.round(1e5*Math.random());return this.events[t].push({callback:e,token:n}),this.retroactiveList[t]&&this.inform(t,this.retroactiveList[t]),n},e.prototype.unsubscribe=function(t){for(var e in this.events)for(var n=0;n<this.events[e].length;n++)if(this.events[e][n].token==t)return this.events[e].splice(n,1),!0;return!1},e.prototype.inform=function(t,e,n){if(n&&(this.retroactiveList[t]=e),null!=this.events[t]){for(var o=0;o<this.events[t].length;o++)this.events[t][o].callback(e);return this.events[t].length}return!1},e.prototype.offer=function(t,e){null==this.offers[t]&&(this.offers[t]=new Object);var n=Math.round(1e5*Math.random())+"-"+Math.round(1e5*Math.random());return this.offers[t]={data:e,token:n},n},e.prototype.request=function(t,e){return null!=e&&e(this.offers[t].data),this.offers[t]?this.offers[t].data:!1},t.Arbiter=new e}(window),function(t,e){meanEngine=function(){this.settings={},this.services={},this.version="alpha-1.0",this._cookiePrefix="meanEngine_",this._jsonPrefix="__JSON__",this.components=[],this.componentInit=!1},meanEngine.prototype.init=function(){},meanEngine.prototype.registerComponent=function(t){return this.components.push(t),this},meanEngine.prototype.initComponents=function(t){if(this.componentInit)return!1;var e,n=this.components.length;for(e=0;n>e;e++)this.components[e](t);return this.componentInit=!0,this},meanEngine.prototype.set=function(t,e,n){return this.settings[t]=e,n&&this.setCookie(this._cookiePrefix+t,e,365),this},meanEngine.prototype.unset=function(t){return this.settings[t]&&delete this.settings[t],this.getCookie(this._cookiePrefix+t)&&this.setCookie(this._cookiePrefix+t,null,-1),!0},meanEngine.prototype.get=function(t){return this.settings[t]?this.settings[t]:this.getCookie(this._cookiePrefix+t)?this.getCookie(this._cookiePrefix+t):!1},meanEngine.prototype.service=function(t,e){return e?void(this.services[t]=e()):this.services[t]},meanEngine.prototype.setCookie=function(t,n,o){if("string"!=typeof n&&"number"!=typeof n&&(n=this._jsonPrefix+JSON.stringify(n)),o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var r="; expires="+i.toGMTString()}else var r="";return e.cookie=t+"="+n+r+"; path=/;",!0},meanEngine.prototype.getCookie=function(t){for(var n=t+"=",o=e.cookie.split(";"),i=0;i<o.length;i++){for(var r=o[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(n)){var s=r.substring(n.length,r.length);return s.substr(0,this._jsonPrefix.length)==this._jsonPrefix&&(s=JSON.parse(s.substr(this._jsonPrefix.length))),s}}return null},meanEngine.prototype.dom=function(t,n,o){var i=e.createElement(t);return void 0!=n&&$(n).append($(i)),o===!0?i:$(i)},t.meanEngine=new meanEngine}(window,document),function(t){t.set("api",{protocol:"http",hostname:"127.0.0.1",port:5e3}),t.set("site",{data:JSON.parse(window.atob(window.pagevampSiteData())),page:JSON.parse(window.atob(window.pagevampPageData()))})}(window.meanEngine),function(t){var e=function(){this.components=[],this.registeredId={},this.loader={total:0,count:0}};e.prototype.register=function(t){this.components.push(t),this.registeredId[t.id]||(this.registeredId[t.id]={data:t},this.loader.total++)},e.prototype.init=function(){var e,n=this;for(e in this.registeredId)!function(e){var o=n.registeredId[e].data.cdnPath+n.registeredId[e].data.directive,i=t.dom("script",$("body"));i.attr("src",o),i.bind("load",function(){n.loader.count++;var t=n.loader.count/n.loader.total*100;console.log("Loading...	",t.toFixed(2)+"%"),n.loader.count==n.loader.total&&window.Arbiter.inform("pvsdk.components.loaded",n.components,!0)})}(e)},e.prototype.getComponentById=function(t){return this.registeredId[t]},e.prototype.getCdnPath=function(t){var e=this.getComponentById(t);return e?e.data.cdnPath:!1},e.prototype.getTemplateFor=function(t){var e=this.getComponentById(t);if(!e)return!1;var n=e.data.cdnPath+e.data.template;return"http://127.0.0.1:5000/api/ress/get/raw?path="+window.btoa(n)},t.set("components",new e)}(window.meanEngine),function(t){var e=t.get("site").page.components;console.warn("components for this page:",e);var n,o=e.length;for(n=0;o>n;n++)t.get("components").register(e[n]);t.get("components").init()}(window.meanEngine),function(t){window.Arbiter.subscribe("pvsdk.components.loaded",function(e){t.set("app",angular.module("main",[])),t.get("app").controller("head",function(t){t.title="Default title"}),t.get("app").controller("body",function(t){t.components=[],t.safeApply(function(){t.components=e})}),t.get("app").run(["$rootScope",function(t){t.safeApply=function(t){var e=this.$root.$$phase;"$apply"==e||"$digest"==e?t&&"function"==typeof t&&t():this.$apply(t)}}]),t.initComponents(t.get("app")),angular.bootstrap(document,["main"])})}(window.meanEngine),function(t){t.registerComponent(function(t){t.directive("componentLoader",function(t){var e=function(e,n){e.$watchCollection("components",function(){var o,i="";for(o=0;o<e.components.length;o++)i+="<div "+e.components[o].id+' style="border:1px solid #333333;padding:5px;margin:5px;">'+e.components[o].id+" goes here</div>";n.html(t(i)(e))})};return{link:e,scope:!0}})})}(window.meanEngine);